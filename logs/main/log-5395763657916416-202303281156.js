function LoadSketchAPIMain() {
    return {"title":"Pro Racerz [LIVE]","author":{"nickname":"Liam K.","link":"https://www.khanacademy.org/profile/liamk.ka/"},"size":{"width":400,"height":600},"link":"https://www.khanacademy.org/computer-programming/pro-racerz-live/5395763657916416","img":"https://www.khanacademy.org/computer-programming/pro-racerz-live/5395763657916416/5697238988701696.png","created":"2021-05-19T15:09:14.726451Z","flags":{"flags":null,"flaggedBy":null},"type":"ace_webpage","code":"&lt;!DOCTYPE html>\n&lt;!--\n██████╗░██████╗░░█████╗░\n██╔══██╗██╔══██╗██╔══██╗\n██████╔╝██████╔╝██║░░██║\n██╔═══╝░██╔══██╗██║░░██║\n██║░░░░░██║░░██║╚█████╔╝\n╚═╝░░░░░╚═╝░░╚═╝░╚════╝░\n\n██████╗░░█████╗░░█████╗░███████╗██████╗░███████╗\n██╔══██╗██╔══██╗██╔══██╗██╔════╝██╔══██╗╚════██║\n██████╔╝███████║██║░░╚═╝█████╗░░██████╔╝░░███╔═╝\n██╔══██╗██╔══██║██║░░██╗██╔══╝░░██╔══██╗██╔══╝░░\n██║░░██║██║░░██║╚█████╔╝███████╗██║░░██║███████╗\n╚═╝░░╚═╝╚═╝░░╚═╝░╚════╝░╚══════╝╚═╝░░╚═╝╚══════╝\n\nRacing made live\n\nYou might notice how the leaderboard changes a lot. Thats because the leaderboard is specific to the map.\n\nFeel free to downvote the save codes.\n\nThanks everyone for your incessant spam.\n\nCredit to Corin Fist for canvas setup. Credit to To13 for API tutorial, Iron Programming for parsing comments. Bluebird for save feature. OOPs Studios for loading. All other code is by me. I reserve the right to use your save codes. \n\nAn explanation of how the 'live' functionality works\n    -You race, and the program records your key strokes.\n\n    -You press save, and then the program condenses your key strokes into a code. You post the code into the T&T\n    \n    -The program uses API to fetch your code, decodes it, and a bot follows your every move\n    \n    -This way you can race against people live!\n\n-->\n&lt;html>\n    &lt;head>\n        &lt;meta charset=\"utf-8\">       \n        &lt;title>Pro Racerz [LIVE]&lt;/title>    \n        &lt;link rel=\"preconnect\" href=\"https://fonts.gstatic.com\">\n&lt;link href=\"https://fonts.googleapis.com/css2?family=PT+Sans&family=Racing+Sans+One&display=swap\" rel=\"stylesheet\">\n        &lt;style>\n            html, body {\n                overflow: hidden;\n                margin: 0px;\n           }\n        &lt;/style>\n    &lt;/head>    \n    &lt;body>\n    &lt;canvas id=\"canvas3D\">&lt;/canvas>     \n    \n    &lt;script src=\"https://cdn.jsdelivr.net/processing.js/1.4.8/processing.min.js\">\n    &lt;/script>\n    &lt;script src=\"https://cdn.jsdelivr.net/npm/html2canvas@1.0.0-rc.3/dist/html2canvas.min.js\">\n    &lt;/script>    \n    &lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js\">\n    &lt;/script>\n\n    &lt;script type=\"application/javascript\" >\n        var comments = [];\n        var need = 0;\n        var at = 0;\n        var encode = function(string){\n            var r  = '';\n            var string = string.split('|');\n            for(var i = 0; i &lt; string.length; i ++){\n                var p = parseInt(string[i],2);\n                var s = p.toString(32);\n                r += s;\n                r+= '|';\n            }\n            return(r);\n        };\n        var decode = function(string){\n            var r = '';\n            var string = string.split('|');\n            \n            for(var i = 0; i &lt; string.length; i ++){\n                var p = parseInt(string[i],32);\n                var s = p.toString(2); \n                while (s.length &lt; 21){\n                    s = '0' + s;   \n                }\n                \n                r += s;\n                r+= '|';\n            }          \n    \n            return(r);\n        };\n        \n     &lt;/script>\n    &lt;script type=\"application/javascript\" >\n    var loadComments = function(){\n        $.getJSON(\"https://www.khanacademy.org/api/internal/discussions/scratchpad/5395763657916416/comments?limit=1000&callback=?\", function(data){  \n        var feedback = data['feedback'];\n        var addComment = function(i) {\n                var Data = feedback[i];\n                var cont = Data.content;\n                if(cont.includes('~`')&&cont.includes('`~')){\n                    var indices = [];\n                    for(var i = 0; i &lt; cont.length; i ++){\n                        if(cont[i] === '~'){\n                            indices.push(i);\n                        }\n                    }\n                    cont = cont.substring(indices[0] + 1, indices[1]);\n                    //Code stolen above from IP to fix a type error\n                    var author = Data.authorNickname;\n                    cont = JSON.parse(cont);\n                    cont[0] = decode(cont[0]);\n                    cont.push(author)\n                    if(cont.includes(author)&&cont[4] > 1030){\n                        comments.push(cont);\n                    }\n                }\n            \n        }; \n        function loop() {\n            addComment(at);\n            at++;\n            if (at &lt; feedback.length) {\n                loop();\n            }\n        };\n        loop();\n            \n        }); \n    };\n    loadComments();\n    &lt;/script>\n    &lt;script type=\"application/javascript\" >\n    /** Canvas **/        \n    var canvas3D = document.getElementById(\"canvas3D\"); \n    /** Processing.JS code  **/ \n    var code = function(processingInstance){\n        with (processingInstance) {\n            var scene = \"load\";\n            //canvas size and type\n\n            size(canvas3D.width, canvas3D.height,WEBGL)\n            \n            smooth();\n            frameRate(30);\n            //Defining the width and height\n            var width = canvas3D.width;\n            var height = canvas3D.height;\n            \n            textAlign(CENTER,CENTER);\n            var fonts = [createFont('Racing Sans One'),createFont('PT Sans Bold')]\n            \n            \n            var keys = {};\n            var clicked = false;\n            var started = false;\n            \n            var added = false;\n            var money = 0;\n            var carColor = color(255,0,0)\n            var cars;\n            var view = 0;\n            var viewX = 0;\n            \n            background(0);\n            fill(255);\n            textFont(fonts[0],50)\n            text(\"Loading...\",300,300);\n            \n            var countdown = {\n                running:false,\n                time:90,\n                x:0,\n                run:function(){\n                    if(countdown.running){\n                        pushMatrix();\n                        translate(0,0,400);\n                        fill(255,countdown.fade);\n                        textFont(fonts[0],100);\n                        if(countdown.time > 0){\n                            text(ceil(countdown.time/30),325,275);\n                        }\n                        else{\n                            text('GO!',325+countdown.x,275);\n                            if(countdown.time &lt; -30){\n                                countdown.x += 16;\n                            }\n                            started = true;\n                        }\n                        countdown.time--;\n                        if(countdown.x > 400){\n                            countdown.running = false;\n                            countdown.time = 90;\n                             countdown.x = 0;\n                        }\n                        \n                        popMatrix();\n                    }\n                }\n            };\n            var cam = {\n                x:0,\n                y:110,\n                z:-0,\n                ry:1.5,\n                rx:1.5,    \n            };\n            var trans = {\n                running:false,\n                y:-600,\n                speed:16,\n                to:null,\n                run: function(){\n                    if(trans.running){\n                        added = false;\n                        if(this.to === 'play'){\n                            started = false;\n                        }\n                        pushMatrix();\n                        translate(0,0,350);\n                        fill(255);\n                        rect(0,trans.y,600,600)\n                        trans.y += trans.speed;\n                        if(trans.y > 0){\n                            scene = trans.to;\n                            trans.speed = -trans.speed;\n                        }\n                        if(trans.y &lt; -600){\n                            trans.running = false;\n                            trans.speed = -trans.speed;\n                            trans.y = -600;\n                            if(trans.to === 'play'){\n                                countdown.running = true;\n                            }\n                        }\n                        popMatrix();\n                    }  \n                },\n            };\n            \n            var choice = function(arr){\n                return(arr[~~random(0,arr.length-0.001)])\n            };\n            var mouseRect = function(x,y,w,h){\n                return(mouseX > x &&mouseX &lt; x+w &&mouseY > y&&mouseY &lt; y+h);\n            }\n            var rectRect = function(x,y,w,h,x2,y2,w2,h2){\n                return(x+w>x2&&x &lt; x2+w2&&y+h>y2&&y &lt; y2+h2);\n            }\n            \n            var curLoad = 0;\n            var imgs = {\n                grass:{\n                    w:400,\n                    h:400,\n                    d:function(){\n                        rectMode(CORNER);\n                        noStroke();\n                        fill(7, 92, 7);\n                        rect(0,0,400,400);\n                        strokeWeight(0.5);\n                        for(var i = 0; i &lt; 15000; i ++){\n                            pushMatrix();\n                            var x = random(0,400);\n                            var y = random(0,400);\n                            translate(x,y+2);\n                            rotate(random(0,360));\n                            translate(-x,-y);\n                            stroke(0,255*noise(x/3,y/3),0);\n                            line(x,y,x,y+4);\n                            popMatrix();\n                        }\n                    },\n                },\n                road1:{\n                    w:400,\n                    h:400,\n                    d:function(){\n\n                        noStroke();\n                        rectMode(CENTER);\n                        fill(255,255,255);\n                        for(var i = 180; i &lt; 270; i ++){\n                            \n                            pushMatrix();\n                            var c = cos(i+5);\n                            var s = sin(i+5);\n                            translate(400+c*200,400+s*200);\n                            rotate(i);\n                            rect(0,0,7,14);\n                            popMatrix();\n                        }\n                        rectMode(CORNER);\n                        \n                        fill(100,100,100);\n                        for(var i = 180; i &lt; 270; i ++){\n                            ellipse(400+cos(i)*200,400+sin(i)*200,250,250);\n                        }\n                        fill(255,0);\n                        image(imgs.grass,0,0)\n\n                    }\n                },\n                road2:{\n                    w:400,\n                    h:400,\n                    d:function(){\n                        pushMatrix();\n                        translate(200,200)\n                        rotate(HALF_PI);\n                        translate(-200,-200);\n                        image(imgs.road1,0,0)\n                        popMatrix();\n                    }\n                },\n                road3:{\n                    w:400,\n                    h:400,\n                    d:function(){\n                        pushMatrix();\n                        translate(200,200)\n                        rotate(PI);\n                        translate(-200,-200);\n                        image(imgs.road1,0,0)\n                        popMatrix();\n                    }\n                },\n                road4:{\n                    w:400,\n                    h:400,\n                    d:function(){\n                        pushMatrix();\n                        translate(200,200)\n                        rotate(-HALF_PI);\n                        translate(-200,-200);\n                        image(imgs.road1,0,0)\n                        popMatrix();\n                    }\n                },\n                road5:{\n                    w:400,\n                    h:400,\n                    d:function(){\n                        rectMode(CENTER);\n                        for(var i = 0; i &lt; 400; i += 30){\n                            rect(200,i,7,14)\n                        }\n                        rectMode(CORNER)\n                        fill(100)\n                        rect(75,0,250,400);\n                        fill(255,255,255);\n                        \n                        fill(255,0)\n                        image(imgs.grass,0,0);\n                    }\n                },\n                road6:{\n                    w:400,\n                    h:400,\n                    d:function(){\n                        rectMode(CENTER);\n                        for(var i = 0; i &lt; 400; i += 30){\n                            rect(i,200,14,7)\n                        }\n                        rectMode(CORNER)\n                        fill(100)\n                        rect(0,75,400,250);\n                        fill(255,0)\n                        image(imgs.grass,0,0);\n                    }\n                },\n                menutrack:{\n                    w:600,\n                    h:400,\n                    d:function(){\n                        noStroke();\n                        fill(180);\n                        for(var i = 100; i &lt; 400; i += 100){\n                            for(var j = 0; j &lt; 600; j += 30){\n                                rect(j,i,15,4);\n                            }\n                        }\n                        for(var i = 0; i &lt; 400; i ++){\n                            fill(lerpColor(60,100,i/400));\n                            rect(0,i,600,1);\n                        }\n                        \n                        \n                    }\n                },\n                building1:{\n                    w:400,\n                    h:400,\n                    d:function(){\n                        background(200)\n                        noStroke();\n                        var Window = function(x,y){\n                            pushMatrix();\n                            translate(x,y);\n                            scale(0.75);\n                            stroke(100)\n                            fill(150);\n                            rect(7,25,35,40);\n                            fill(180)\n                            rect(0,65,50,10);\n                            fill(100);\n                            noStroke();\n                            quad(7,65,42,65,42,40,7,50);\n                            stroke(100)\n                            fill(200);\n                            rect(0,15,50,60);   \n                            noStroke();\n                            popMatrix();\n                        };\n                        for(var i = 0; i &lt; 4; i ++){\n                            for(var j = 0; j &lt; 3; j ++){\n                                Window(i*100+32,j*125+50);   \n                            }\n                        }\n                        fill(205, 92, 92);\n                        for(var i = 0; i &lt; 450; i += 20){\n                            for(var j = 0; j &lt; 400; j += 10){\n                                pushMatrix();\n                                translate(j%20&lt;10?-50:0,0);\n                                rect(i,j,18,8);\n                                popMatrix();\n                            }\n                        }   \n                        \n                        \n                    }\n                },\n                building2:{\n                    w:400,\n                    h:400,\n                    d:function(){\n                        noStroke();\n                        var Window = function(x,y){\n                            pushMatrix();\n                            translate(x,y);\n                            scale(0.75);\n                            stroke(100)\n                            fill(150);\n                            rect(7,25,35,40);\n                            fill(180)\n                            rect(0,65,50,10);\n                            fill(100);\n                            noStroke();\n                            quad(7,65,42,65,42,40,7,50);\n                            stroke(100)\n                            fill(200);\n                            rect(0,15,50,60);   \n                            noStroke();\n                            popMatrix();\n                        };\n                        for(var i = 0; i &lt; 4; i ++){\n                            for(var j = 0; j &lt; 3; j ++){\n                                Window(i*100+32,j*125+50);   \n                            }\n                        }                        \n                        fill(235, 218, 183);\n                        rect(0,0,400,400);\n                    }\n                },\n                building3:{\n                    w:400,\n                    h:400,\n                    d:function(){\n                        noStroke();\n                        pushMatrix();\n                        translate(0,-250)\n                        \n                        for(var i = 0; i &lt; 5; i ++){\n                            if(i!==2){\n                                pushMatrix();\n                                translate(25+i*77.5,300);\n                                \n                                noStroke();\n                                fill(97, 97, 179);\n                                quad(2,15,2,58,38,58,38,35);\n                                stroke(255);\n                                strokeWeight(3);\n                                fill(99, 99, 194);\n                                rect(0,0,40,60);  \n                                popMatrix();\n                            }\n                        }\n                        fill(110, 62, 11);\n                        noStroke();\n                        quad(177,325,177,400,223,400,223,350);\n                        stroke(255);\n                        strokeWeight(3);\n                        fill(138, 80, 8);\n                        rect(175,300,50,102);\n                        noStroke();\n                        for(var i = 0; i &lt; 25; i ++){\n                            fill(214, 137, 69);\n                            rect(random(0,400),random(250,400),15,7);\n                        }\n                        popMatrix();\n                        fill(212, 155, 93);\n                        rect(0,0,400,400);\n                    }\n                },\n                building4:{\n                    w:400,\n                    h:400,\n                    d:function(){\n                    noStroke();\n                    \n                    pushMatrix();\n                    translate(0,-250)\n                    \n                    \n                    stroke(255);\n                    strokeWeight(3);\n                    fill(138, 80, 8);\n                    rect(175,300,50,102);\n                    for(var i = 0; i &lt; 5; i ++){\n                        if(i!==2){\n                            pushMatrix();\n                            translate(25+i*80.3,325);\n                            stroke(255);\n                            strokeWeight(3);\n                            \n                            fill(103, 157, 224);\n                            rect(0,0,30,50);\n                            line(15,0,15,50);\n                            line(0,25,30,25);\n                            popMatrix();\n                        }\n                    }\n                    \n                    fill(110, 62, 11);\n                    \n                    noStroke();\n                    ellipse(210,350,10,10);\n                    for(var i = 0; i &lt; 25; i ++){\n                        fill(222, 183, 84);\n                        rect(random(0,400),random(250,400),15,7);\n                    }\n                    rect(0,365,400,35);\n                    popMatrix();\n                    fill(245, 203, 95);\n                    rect(0,0,400,400);\n                    }\n                },\n                building5:{\n                    w:400,\n                    h:400,\n                    d:function(){\n                        noStroke();\n                        pushMatrix();\n                        translate(0,-250);\n                        \n                        \n                        stroke(255);\n                        strokeWeight(3);\n                        fill(122, 176, 214);\n                        rect(175,300,50,102);\n                        for(var i = 0; i &lt; 5; i ++){\n                            if(i!==2){\n                                pushMatrix();\n                                translate(25+i*80.3,325);\n                                stroke(255);\n                                strokeWeight(3);\n                                \n                                fill(45, 51, 87);\n                                rect(0,0,30,50);\n                                line(15,0,15,50);\n                                line(0,50/3,30,50/3);\n                                line(0,100/3,30,100/3);\n                                popMatrix();\n                            }\n                        }\n                        noStroke();\n                        fill(240, 225, 206);\n                        rect(0,355,400,7);\n                        fill(212, 160, 130);\n                        rect(0,362,400,40);\n                        for(var i = 0; i &lt; 25; i ++){\n                            fill(240, 225, 206);\n                            rect(random(0,400),random(250,400),15,7);\n                        }\n                        \n                        popMatrix();\n                        fill(235, 212, 183);\n                        rect(0,0,400,400);\n                    }\n                },\n                wall:{\n                    w:400,\n                    h:400,\n                    d:function(){\n                        pushMatrix();\n                        translate(200,200)\n                        rotate(HALF_PI/2)\n                        translate(-200,-200);\n                        fill(255,200,0);\n                        \n                        noStroke();\n                        for(var i = -100; i &lt;= 600; i +=40){\n                            pushMatrix();\n                            rect(i,-100,20,600);\n                            popMatrix();\n                        }\n                        fill(0)\n                        rect(-100,-100,600,600)\n                        popMatrix();\n                    }\n                },\n                line:{\n                    w:400,\n                    h:400,\n                    d:function(){\n                        noStroke();\n                       \n                       for(var i = 0; i &lt; 400; i += 40){\n                            for(var j = 0; j &lt; 400; j += 20){\n                                fill(0);\n                                rect(j%40 &lt; 20?i:i+20,j,20,20);\n                            }\n                        } \n                        fill(255);\n                        rect(0,0,400,400);\n                    }\n                },\n                finishline:{\n                    w:400,\n                    h:400,\n                    d:function(){\n                        \n                        fill(255,0)\n                        image(imgs.line,80,0,240,100)\n                        image(imgs.road5,0,0)\n                        \n                    }\n                },\n                crate:{\n                    w:400,\n                    h:400,\n                    d:function(){ \n                        scale(1/2.666666667)\n                        stroke(105, 64, 17);\n                        strokeWeight(3);\n                        var n = noise(19.2)*50;\n                        fill(97+n, 62+n, 10+n);\n                        quad(0,0,50,50,350,50,400,0);\n                        quad(0,0,50,50,50,350,0,400);\n                        quad(50,350,0,400,400,400,350,350);\n                        quad(350,350,400,400,400,0,350,50);\n                        \n                        strokeWeight(1)\n                        for(var i = 0; i &lt; 400; i += 50){\n                            var n = noise(i/1.1)*50;\n                            fill(97+n, 62+n, 10+n);\n                            rect(50,i,300,50);   \n                        }\n                        scale(2.66666666667)\n                    }\n                }\n            };     \n            var load = function(){\n                if(curLoad &lt; Object.keys(imgs).length){\n                    background(255,0);\n                    var img= imgs[Object.keys(imgs)[curLoad]];\n                    img.d();\n                    imgs[Object.keys(imgs)[curLoad]] = get(0,0+img.h/2,img.w,img.h);\n                    background(0,0,0,0);\n                    curLoad++;\n                    \n                }\n                \n                if(curLoad >= Object.keys(imgs).length){\n                    scene = 'menu';\n                }\n    \n                background(0);\n                fill(255);\n                textFont(fonts[0],50)\n                text(\"Loading... \"+~~(curLoad / +Object.keys(imgs).length*100)+'%',width/2,height/2);\n            };\n            \n            var cube = function(x,y,z,w,h,d){\n                pushMatrix(); \n                    translate(x+w/2, y+h/2, z+d/2);\n                    box(w, h, d);\n                popMatrix();\n            };\n            var spher = function(x,y,z,d,sx,sy){\n                pushMatrix();\n                translate(x,y,z);\n                scale(sx,sy)\n                sphere(d);\n                popMatrix();\n            };\n            var racecar = function(x,y,z,ry,rz,clr,num){\n                lights();\n                pushMatrix();\n                translate(x,y,z);\n                rotateY(ry);\n                rotateZ(rz);\n                var r = red(clr);\n                var g = green(clr);\n                var b = blue(clr);\n                fill(r-55,g-55,b-55);\n                noStroke();\n                cube(60,25,0,120,55,100);\n                cube(60,75,0,300,10,100);\n                cube(60,25,0,300,55,10);\n                cube(60,25,90,300,55,10);\n                cube(350,25,0,10,55,100)\n                cube(350,25,0,-50,10,100)\n                pushMatrix();\n                rotateZ(-0.6);\n                cube(110,110,0,20,55,100);\n                cube(110,110,0,80,10,10);\n                cube(110,110,90,80,10,10);\n                cube(180,110,0,10,10,100);\n                fill(255,50)\n                cube(130,110,10,50,8,80);\n                popMatrix();\n                \n                fill(clr);\n                spher(120,30,20,10,6,0.7);\n                spher(120,30,80,10,6,0.7);\n                cube(80,30,-15,5,15,15);\n                cube(80,30,100,5,15,15);\n                cube(80,30,-15,60,5,15);\n                cube(80,30,100,60,5,15);\n                cube(80,30,-15,5,50,15);\n                cube(80,30,100,5,50,15);\n                spher(63,40,15,10);\n                spher(63,40,85,10);\n                pushMatrix();\n                rotateZ(-0.5);\n                cube(105,95,100,5,50,15)\n                cube(105,95,-15,5,50,15)\n                popMatrix();\n                pushMatrix();\n                rotateZ(0.5);\n                cube(260,-106,100,5,50,15)\n                cube(260,-106,-15,5,50,15)\n                fill(50);\n                spher(270,-110,50,45,0.2,1.1)\n                fill(clr)\n                popMatrix();\n                cube(280,30,-15,60,5,15);\n                cube(280,30,100,60,5,15);\n                cube(340,30,-15,5,50,15);\n                cube(340,30,100,5,50,15);\n                \n                fill(50);\n                cube(57,35,15,10,30,10)\n                cube(57,35,35,10,30,10)\n                cube(57,35,55,10,30,10)\n                cube(57,35,75,10,30,10)\n                spher(115,70,-9,15,2,2)\n                spher(115,70,108,15,2,2)\n                spher(305,70,-9,15,2,2)\n                spher(305,70,108,15,2,2)\n                pushMatrix();\n                translate(330,4,45);\n                rotateX(HALF_PI);\n                rotateZ(-HALF_PI);\n                textFont(fonts[0],35)\n                text(num,0,0)\n                popMatrix();\n                fill(r-55,g-55,b-55);\n                spher(60,40,15,8);\n                spher(60,40,85,8);\n                \n                popMatrix();\n                noLights();\n            };\n            var menucar = function(x,y,clr,rz){\n                pushMatrix();\n                translate(x,y,30);\n                scale(0.35);\n                rotateZ(rz);\n                rotateX(-HALF_PI);\n                racecar(0,0,0,0,0,clr,10);\n                popMatrix();\n            }\n            var crate = function(x,y,z){\n                pushMatrix();\n                translate(x,y+50,z);\n                image(imgs.crate,0,0,150,150)\n                translate(0,0,150)\n                image(imgs.crate,0,0,150,150)\n                translate(0,0,-150)\n                rotateY(HALF_PI);\n                image(imgs.crate,-150,0,150,150)\n                translate(0,0,150)\n                image(imgs.crate,-150,0,150,150)\n                rotateX(HALF_PI)\n                image(imgs.crate,-150,-150,150,150)\n                popMatrix();\n                \n            };\n            var ground = function(){\n                pushMatrix();\n                \n                fill(255,0);\n                translate(0,550,0);\n                    rotateX(HALF_PI);\n                    var m = maps[Map];\n                    for(var i = 0; i &lt; m.length; i ++){\n                        for(var j = 0; j &lt; m[i].length; j ++){\n                            switch(m[i][j]){\n                                default:\n                                    image(imgs.grass,-2+j*1500,i*1500-2,1504,1504);               \n                                break;\n                                case '(':\n                                    image(imgs.road1,-2+j*1500,i*1500-2,1504,1504);               \n                                break;\n                                case ')':\n                                    image(imgs.road2,-2+j*1500,i*1500-2,1504,1504);               \n                                break;\n                                case '{':\n                                    image(imgs.road4,-2+j*1500,i*1500-2,1504,1504);               \n                                break;\n                                case '}':\n                                    image(imgs.road3,-2+j*1500,i*1500-2,1504,1504);               \n                                break;\n                                case '|':\n                                    image(imgs.road5,-2+j*1500,i*1500-2,1504,1504);\n                                break;\n                                case '_':\n                                    image(imgs.road6,-2+j*1500,i*1500-2,1504,1504);\n                                break;\n                                case '[':\n                                    image(imgs.road5,-2+j*1500,i*1500-2,1504,1504);\n                                    popMatrix();\n                                    pushMatrix();\n                                    \n                                    translate(j*1500,400,i*1500)\n                                    rotateY(-HALF_PI)\n                                    rotateX(-HALF_PI/4)\n                                    image(imgs.wall,0,0,1504,1504);\n                                    popMatrix();\n                                    pushMatrix();\n                                    \n                                    translate(j*1500+1500,400,i*1500)\n                                    rotateY(-HALF_PI)\n                                    rotateX(HALF_PI/4)\n                                    image(imgs.wall,0,0,1504,1504);\n                                    popMatrix();\n                                    pushMatrix();\n                                    translate(0,550,0);\n                                    rotateX(HALF_PI);\n                                break;\n                                case '=':\n                                    image(imgs.road6,-2+j*1500,i*1500-2,1504,1504);\n                                    popMatrix();\n                                    pushMatrix();\n                                    \n                                    translate(j*1500,400,i*1500)\n                                    rotateX(HALF_PI/4)\n                                    image(imgs.wall,0,0,1504,1504);\n                                    popMatrix();\n                                    pushMatrix();\n                                    \n                                    translate(j*1500,400,i*1500+1500)\n                                    rotateX(-HALF_PI/4)\n                                    image(imgs.wall,0,0,1504,1504);\n                                    popMatrix();\n                                    pushMatrix();\n                                    translate(0,550,0);\n                                    rotateX(HALF_PI);\n                                break;\n                                case '#':\n                                    image(imgs.finishline,-2+j*1500,i*1500-2,1504,1504);\n                                break;\n                            }\n                        }\n                    }\n               \n                    \n                popMatrix();\n                \n                    \n            };\n            \n            var Map = 2;\n            var maps = [\n                [\n                    '-bbbbbbb--',\n                    '-b(___)b--',\n                    '-b|bbb|bbb',\n                    '-b#b-b{_)-',\n                    '-b|bb-bb[-',\n                    '-b{_)b-b[-',\n                    '--bb|b-b[-',\n                    '---b|bbb[-',\n                    '---b{===}b',\n                    '----bbbbb-',\n                ],  \n                [\n                    '-bbbbb-----',\n                    '-b(_)b-----',\n                    '-b|b|b-----',\n                    '-b#b|bbbbb-',\n                    '--[b|b(_)b-',\n                    '--[b|b|b|b-',\n                    '--[b{_}b|b-',\n                    '--[bbbbb|b-',\n                    '-b{=====}b-',\n                    '-bb-----b--',\n                    '-----------',\n                ],\n                [\n                    '-----------',\n                    '--b---b----',\n                    '-b(===)b---',\n                    '-b#bbb|b---',\n                    '-b|bb(}b---',\n                    '-b|bb|bbb--',\n                    '-b|bb{__)b-',\n                    '-b{)bbbb|b-',\n                    '--b{)bbb|b-',\n                    '---b{===}b-',\n                    '----b---b--',\n                    '-----------',\n                ],  \n            ];\n            \n            var Player = function(){\n                this.spot = ~~random(0,1.99);\n\n                this.x = 3500+this.spot *500;\n                this.y = 450;\n                this.z = 4500;\n                \n                this.rx = 1.1;\n                this.ry = -HALF_PI;\n                this.rz = 0;\n\n                this.speed = 0;\n                this.maxSpeed = 80;\n\n                this.save = '';\n                this.savenum = 0;\n                \n                this.time = 0;\n                \n                this.laps = -1;\n                this.lapped = false;\n                \n                this.keys = [false,false,false];\n            }\n            Player.prototype.move = function(){\n                this.px = this.x;\n                this.pz = this.z;\n                \n                if(this.time%3 === 0){\n                    this.keys = [false,false,false];\n                    if(keys[UP]||keys[87]){\n                        this.speed +=2;\n                        this.save += '1';\n                        this.keys[0] = true;\n                    }\n                    else if(this.speed > 0) {\n                        this.speed -= 2;\n                    }\n                    if(!keys[UP] && !keys[87]){\n                        this.save += '0';\n                    }\n                    this.x-=cos(this.ry)*this.speed;\n                    this.z-=sin(this.ry)*this.speed;\n                    if(keys[LEFT]||keys[65]){\n                        this.ry -=this.speed/1000;\n                        this.save += '1'\n                        if(this.speed >20){\n                            this.speed -= 3;\n                        }\n                        this.keys[1] = true;\n                    }\n                    else {\n                        this.save += '0'\n                    }\n                    if(keys[RIGHT]||keys[68]){\n                        this.ry +=this.speed/1000;\n                        this.save += '1';\n                        if(this.speed >20){\n                            this.speed -= 3;\n                        }\n                        this.keys[2] = true;\n                    }\n                    else {\n                        this.save += '0'\n                    }\n                    this.speed = constrain(this.speed,0,this.maxSpeed);\n                    this.savenum ++;\n                    if(this.savenum % 7 === 0){\n                        this.save += '|'\n                    }\n                }\n                else{\n                    if(this.keys[0]){\n                        this.speed +=2;\n                    }\n                    else if(this.speed > 0){\n                        this.speed -= 2;\n                    }\n                    this.x-=cos(this.ry)*this.speed;\n                    this.z-=sin(this.ry)*this.speed;\n                    if(this.keys[1]){\n                        this.ry -=this.speed/1000;\n                        if(this.speed >20){\n                            this.speed -= 3;\n                        }\n                    }\n                    if(this.keys[2]){\n                        this.ry +=this.speed/1000;\n                        if(this.speed >20){\n                            this.speed -= 3;\n                        }\n                    }\n                    this.speed = constrain(this.speed,0,this.maxSpeed);\n                    \n                }\n            };   \n            Player.prototype.display = function(){\n                noLights();\n                racecar(this.x,this.y,this.z,-this.ry,0,carColor,10);\n            };\n            Player.prototype.circColl = function(obj){\n                var distance=dist(this.x,this.z,obj.x+75,obj.z+75);\n                if(distance &lt;= 200){\n                    var a = atan2(this.z - (obj.z+75),this.x-(obj.x+75));\n                    var s = 200-distance;\n                    this.x += cos(a)*s;\n                    this.z += sin(a)*s;\n                    if(this.speed > 30){\n                        this.speed -=3;\n                    }\n                }\n            };\n            Player.prototype.collide= function(x,y,w,h){\n                if(rectRect(this.x,this.z,200,200,x,y,w,h)){\n                    if(this.speed > 30){\n                        this.speed -=2;\n                    }\n                    if(this.pz + 200 &lt;= y) {\n                        this.z = y - 200;    \n                    }\n                    else if(this.px >= x + w) {\n                        this.x = x+w;\n                    }\n                    else if(this.px  &lt;= x- 200) {\n                        this.x = x-200;\n                    }\n                    else if(this.pz >= y + h){\n                        this.z = y+h;\n                    }  \n                }\n            };\n            Player.prototype.runColl = function(){\n                var x = this.x+sin(-this.ry)*50;\n                var y = this.z+cos(this.ry)*50;\n\n                for(var i = ~~(y/1500)-1;i &lt;=~~(y/1500)+1;i++){\n                    for(var j = ~~(x/1500)-1;j&lt;=~~(x/1500)+1;j++){\n                        if(maps[Map][i][j]!== undefined){\n                            var colltypes = '-b'\n                            if(colltypes.includes(maps[Map][i][j])){\n                            this.collide(j*1500,i*1500,1500,1500);                         \n                            }\n                            else if(maps[Map][i][j] === '#'){\n                                if(rectRect(this.x,this.z,250,250,j*1500,i*1500,1500,1500)){\n                                    if(!this.lapped){\n                                        if(cos(p.ry+HALF_PI)>0){\n                                        this.laps++;\n                                        }\n                                        else{\n                                            this.laps --;\n                                        }\n                                    }\n                                    this.lapped = true;\n                                }\n                                else{\n                                    this.lapped = false;\n                                }\n                            }\n                        }\n                    }\n                }\n                for(var i = 0; i &lt; crates.length; i ++){\n                    if(abs(~~(crates[i].x/1500)- ~~(this.x/1500)) &lt; 2&&abs(~~(crates[i].z/1500) - ~~(this.z/1500)) &lt; 2){\n                        this.circColl(crates[i]);\n                        \n                    }\n                }\n\n                \n            };\n            var p = new Player();\n            \n            var Racer = function(){\n                this.y = 450;\n                this.z = 4500;\n                \n                this.rx = 1.1;\n                this.ry = -HALF_PI;\n                this.rz = 0;\n                \n                this.speed = 0;\n                this.maxSpeed = 80;\n                this.loaded = false;\n                this.time = 0;\n                \n                this.index = 0;\n                this.laps = -1;\n                this.lapped =false;\n                this.keys = [false,false,false];\n            };\n            Racer.prototype.loadString = function(){\n                if(!this.loaded){\n                    var c = choice(comments);\n                    this.spot = c[1];\n                    while(this.spot === p.spot||Map!==c[3]){\n                        c = choice(comments);\n                        this.spot = c[1];\n                    }\n                    this.x = 3500+this.spot *500;\n                    this.str = c[0];\n                    this.clr = c[2];\n                    this.name = c[5];\n                    this.loaded = true;\n                    \n                }\n            }\n            Racer.prototype.move = function(){\n                this.px = this.x;\n                this.pz = this.z;\n                if(this.time%3 === 0&&this.loaded){ \n                    if(this.str[this.index]==='|'){\n                        this.index ++;\n                    }\n                    var s = this.str.substring(this.index,this.index+3).split('');\n                    this.keys = [false,false,false];\n                    if(s[0] === '1'){\n                        this.speed +=2;\n                        this.keys[0] = true;\n                    }\n                    else if(this.speed > 0) {\n                        this.speed -= 2;\n                    }\n                    this.x-=cos(this.ry)*this.speed;\n                    this.z-=sin(this.ry)*this.speed;\n                    if(s[1] === '1'){\n                        this.ry -=this.speed/1000;\n                        if(this.speed >20){\n                            this.speed -= 3;\n                        }\n                        this.keys[1] = true;\n                    }\n                    if(s[2] === '1'){\n                        this.ry +=this.speed/1000;\n                        if(this.speed >20){\n                            this.speed -= 3;\n                        }\n                        this.keys[2] = true;\n                    }\n                    this.speed = constrain(this.speed,0,this.maxSpeed);\n                    this.index += 3;\n                }\n                else if(this.loaded){\n                    if(this.keys[0]){\n                        this.speed +=2;\n                    }\n                    else if(this.speed > 0){\n                        this.speed -= 2;\n                    }\n                    this.x-=cos(this.ry)*this.speed;\n                    this.z-=sin(this.ry)*this.speed;\n                    if(this.keys[1]){\n                        this.ry -=this.speed/1000;\n                        if(this.speed >20){\n                            this.speed -= 3;\n                        }\n                    }\n                    if(this.keys[2]){\n                        this.ry +=this.speed/1000;\n                        if(this.speed >20){\n                            this.speed -= 3;\n                        }\n                    }\n                    this.speed = constrain(this.speed,0,this.maxSpeed);\n                    \n                }\n                    \n            };\n            Racer.prototype.display = function(){\n                racecar(this.x,this.y,this.z,-this.ry,0,this.clr,10)   \n                pushMatrix();\n                translate(this.x+sin(-p.ry)*50,this.y-100,this.z+cos(p.ry)*50);\n                rotateY(atan2(p.z-this.z,p.x-this.x)+90);\n                fill(0);\n                textFont(fonts[0],35);\n                text(this.name,0,0);\n                popMatrix();\n                \n            };\n            Racer.prototype.circColl = function(obj){\n                var distance=dist(this.x,this.z,obj.x+75,obj.z+75);\n                if(distance &lt;= 200){\n                    var a = atan2(this.z - (obj.z+75),this.x-(obj.x+75));\n                    var s = 200-distance;\n                    this.x += cos(a)*s;\n                    this.z += sin(a)*s;\n                    if(this.speed > 30){\n                        this.speed -=3;\n                    }\n                }\n            };\n            Racer.prototype.collide= function(x,y,w,h){\n                if(rectRect(this.x,this.z,200,200,x,y,w,h)){\n                    if(this.speed > 30){\n                        this.speed -= 2;\n                    }\n                    if(this.pz + 200 &lt;= y) {\n                        this.z = y - 200;    \n                    }\n                    else if(this.px >= x + w) {\n                        this.x = x+w;\n                    }\n                    else if(this.px  &lt;= x- 200) {\n                        this.x = x-200;\n                    }\n                    else if(this.pz >= y + h){\n                        this.z = y+h;\n                    }  \n                }\n            };\n            Racer.prototype.runColl = function(){\n                var x = this.x+sin(-this.ry)*50;\n                var y = this.z+cos(this.ry)*50;\n                \n                for(var i = ~~(y/1500)-1;i &lt;=~~(y/1500)+1;i++){\n                    for(var j = ~~(x/1500)-1;j&lt;=~~(x/1500)+1;j++){\n                        if(maps[Map][i][j]!== undefined){\n                            var colltypes = '-b'\n                            if(colltypes.includes(maps[Map][i][j])){\n                            this.collide(j*1500,i*1500,1500,1500);                         \n                            }\n                            else if(maps[Map][i][j] === '#'){\n                                if(rectRect(this.x,this.z,250,250,j*1500,i*1500,1500,1500)){\n                                    if(!this.lapped){\n                                        if(cos(p.ry+HALF_PI)>0){\n                                        this.laps++;\n                                        }\n                                        else{\n                                            this.laps --;\n                                        }\n                                    }\n                                    this.lapped = true;\n                                }\n                                else{\n                                    this.lapped = false;\n                                }\n                            }\n                        }\n                    }\n                }\n                for(var i = 0; i &lt; crates.length; i ++){\n                    if(abs(~~(crates[i].x/1500)- ~~(this.x/1500)) &lt; 2&&abs(~~(crates[i].z/1500) - ~~(this.z/1500)) &lt; 2){\n                        this.circColl(crates[i]);\n                        \n                    }\n                }\n\n\n                \n            };\n            var r = new Racer()\n            \n            var ShopCar = function(x,n,clr,txt,s,c){\n                this.x = x;\n                this.y = 250;\n                \n                this.name = n;\n                this.clr = clr;\n                this.txt = txt;\n                \n                this.stage = s;\n                this.cost = c;\n            };\n            ShopCar.prototype.draw = function(){\n                racecar(this.x,this.y,0,0,0,this.clr,10);\n                translate(0,0,100)\n                fill(255)\n                textFont(fonts[1],20)\n                text(this.txt,this.x+25,this.y+50,375,100)\n                textFont(fonts[0],25)\n                text(this.name,this.x+30,this.y-95,375,100)\n                noFill();\n                stroke(255);\n                strokeWeight(3);\n                var txt = 'afdsa';\n                if(this.stage === 'Buy'){\n                    txt = 'Buy: '+this.cost;\n                }\n                else if(this.stage === 'Owned'){\n                    txt = 'Equip';\n                }\n                else if(this.stage === 'Selected'){\n                    txt = this.stage;\n                }\n                if(mouseRect(this.x+100+viewX,this.y+150,400,75)){\n                    fill(100)\n                    if(this.stage === 'Buy'){\n                        if(money >= this.cost&&clicked){\n                            this.stage = 'Owned';\n                            money -= this.cost;\n                        }\n                        else if(money &lt; this.cost) {\n                            txt = 'Win more $'\n                        }\n                    }\n                    else if(this.stage === 'Owned'&&clicked){\n                        this.stage = 'Selected';\n                        carColor = this.clr;\n                        for(var i = 0; i &lt; cars.length; i ++){\n                            if(cars[i].stage === 'Selected'&&cars[i]!== this){\n                                cars[i].stage = 'Owned';\n                            }\n                            \n                        }\n                    }\n                }\n                rect(this.x+50,this.y+135,320,50);\n                \n                fill(255)\n                translate(0,0,50)\n                text(txt,this.x+25,this.y+110,370,50)\n                translate(0,0,-150)\n            };\n            cars = [\n                new ShopCar(0,'Red Racer',color(255,0,0),'A nice starter car','Selected',0),\n                new ShopCar(600,'The 𝔽𝕚𝕤𝕥',color(255,255,0),'Dedicated to a friend','Buy',50),\n                new ShopCar(1200,'White Knight',color(255),'Imagine keeping this thing clean!','Buy',100),\n                new ShopCar(1800,'Black Mobile',color(0,0,0),'Cant go wrong with black.','Buy',250),\n                new ShopCar(2400,'xacer racer',color(0,0,255),'Only for Jentlemen.','Buy',500),\n                \n            ];\n            \n            var buildings = [];\n            var Building = function(x,z){\n                this.x = x;\n                this.z = z;\n                this.y = 50;\n                this.type = 'building' + choice(['1','2','3','4','5'])            \n            };\n            Building.prototype.draw = function(){\n                fill(255)\n                //lights();\n                \n                pushMatrix();\n                translate(this.x,this.y,this.z);\n                image(imgs[this.type],0,0,1500,1500)\n                translate(0,0,1500)\n                image(imgs[this.type],0,0,1500,1500)\n                translate(0,0,-1500)\n                rotateY(HALF_PI)\n                image(imgs[this.type],-1500,0,1500,1500)\n                translate(0,0,1500)\n                image(imgs[this.type],-1500,0,1500,1500)\n                popMatrix();\n                \n                noLights();\n            };\n            var loadBuildings = function(){\n                var m = maps[Map];\n                for(var i = 0; i &lt; m.length; i ++){\n                    for(var j = 0; j &lt; m[i].length; j ++){\n                        if(m[i][j]==='b'){\n                            buildings.push(new Building(j*1500,i*1500));\n                        }\n                    }\n                }\n            };\n            \n            var crates = [];\n            var loadCrates = function(){\n                randomSeed(10);\n                var solids = 'b-'.split('')\n                var m = maps[Map];\n                for(var i = 0; i &lt; m.length; i ++){\n                    for(var j = 0; j &lt; m[i].length; j ++){\n                        if(!solids.includes(m[i][j])){\n                            crates.push({x:j*1500+random(3,12)*100,z:i*1500+700+random(3,12)*100})\n                        }\n                    }\n                }\n                \n            };\n            \n            var button = function(x,y,to){\n                this.x = x;\n                this.y = y;\n                this.to = to;\n                this.w = 300;\n            };\n            button.prototype.display = function(){\n                pushMatrix();\n                translate(0,0,45)\n                stroke(255);\n                strokeWeight(8);\n                noFill();\n                rectMode(CENTER);\n                rect(this.x,this.y+6.5,this.w,50);\n                textFont(fonts[1],35);\n                fill(255)\n                text(this.to.toUpperCase(),this.x,this.y)\n                rectMode(CORNER);\n                popMatrix();\n            }; \n            button.prototype.onHover = function(){\n                if(mouseRect(this.x-this.w/2,this.y-10,this.w,60)){\n                    this.w = lerp(this.w,400,0.15);\n                    if(clicked&&!trans.running){\n                        if(this.to!== 'save'){\n                            trans.running = true;\n                            trans.to = this.to;\n                            p = new Player();\n                            r = new Racer();\n                            Map = choice([0,1,2]);\n                            buildings = [];\n                            loadBuildings()\n                            crates = []\n                            loadCrates();\n                        }\n                        else{\n                            while (p.savenum%7 !== 0){\n                                p.save += '000';\n                                p.savenum++;\n                            }\n                            var e = encode(p.save);\n                            println('`~[\"'+e+'\",'+p.spot+','+carColor+','+Map+','+p.time+']~`');              println('Copy and paste the code above into the tips and thanks. Post nothing else');\n                        }\n                        \n                    }\n                }\n                else if(this.w > 300) {\n                    this.w *= 0.95;\n                }\n            };\n            button.prototype.run = function(){\n                this.display();\n                this.onHover();\n            }\n            var btns = {\n                play:new button(300,350,'play'),\n                how:new button(300,425,'how'),\n                shop:new button(300,500,'shop'),\n                home:new button(300,500,'menu'),\n                save:new button(300,425,'save'),\n                \n            }\n            \n            var menu = function(){\n                noStroke();\n                fill(255,0,90);\n                quad(50,20,135,20,115,120,30,120)\n                rect(100,245,445,5);\n                triangle(50,20,30,20,50,40)\n                \n                fill(255,0)\n                image(imgs.menutrack,0,100);\n                fill(255,0)\n                image(imgs.grass,0,0,600,600)\n                pushMatrix();\n                translate(0,0,70);\n                fill(255);\n                textFont(createFont('Racing Sans One'),140)\n                text('Pro',185,30);\n                text('Racerz',360,150)\n                textFont(createFont('PT Sans Bold Italic'),40);                        \n                text(' Racing made live ',322,270)\n                textFont(fonts[1],25)\n                text('$'+money+' ',490,60)\n                popMatrix();\n                \n                menucar(500,125,color(0,255,0),0)\n                menucar(300,375,color(255,0,0),PI)\n                menucar(300,425,color(0,0,255),0)\n                menucar(80,275,color(0,0,0),PI)\n                btns.play.run();\n                btns.how.run()\n                btns.shop.run()\n                \n            };\n            var play = function(){\n                background(255); \n                pushMatrix();\n                    r.loadString();\n                    \n                    if(!trans.running && (!countdown.running || countdown.time &lt; 0)){\n                        r.move();\n                        p.move();\n                        if(p.laps!== 3){\n                            p.time ++;\n                        }\n                        if(r.laps!== 3){\n                            r.time ++;\n                        }\n                    }\n                    \n                    \n                    rotateX(p.rx-HALF_PI);\n                    rotateY(p.ry-HALF_PI);\n                    translate(-p.x-sin(-p.ry)*350,-p.y+150,-p.z-cos(p.ry)*350);\n                   \n                    p.display();\n                    p.runColl();\n                    r.display();\n                    r.runColl(); \n                    for(var i=0;i&lt;buildings.length;i++){\n                        buildings[i].draw()\n                    }\n                    for(var i=0; i&lt; crates.length; i ++){\n                        crate(crates[i].x,350,crates[i].z)  \n                    }\n                    ground();\n\n                popMatrix();\n                fill(0)\n                textFont(fonts[1],25);\n                text('Time: '+~~(p.time/30)+' ',100,15);\n                text('Laps: '+p.laps+'/3',500,15);\n                if(p.laps === 3){\n                    trans.running = true;\n                    trans.to = 'over';\n                }\n                if(p.laps &lt;= -3){\n                    println('bruh....')\n                }\n            };\n            var over = function(){\n                noStroke();\n                pushMatrix();\n                fill(255,0,90);\n                translate(-5,-20)\n                quad(55+118,20,140+118,20,115+118,120,30+118,120)\n                rect(150,125,275,5);\n                rect(150,200,275,5);\n                triangle(55+118,20,30+118,20,55+118,40)\n                popMatrix();\n                fill(255,0)\n                image(imgs.menutrack,0,100);\n                fill(255,0)\n                image(imgs.grass,0,0,600,600)\n                pushMatrix();\n                translate(30,0,70);\n                fill(255);\n                textFont(fonts[0],140)\n                text('Over',310,10);\n                textFont(fonts[1],30);\n                if(p.time &lt;= r.time){\n                    text('You won this round!',265,140)\n                    textSize(20)\n                    text('+25 dollars reward!',265,170)\n                    if(!added && !trans.running){\n                        money += 25;\n                        added = true;\n                    }\n                }\n                else{\n                    text('You lost this round',265,140)\n                    textSize(20)\n                    text('+10 dollars reward',265,170)\n                    if(!added && !trans.running){\n                        money += 10;\n                        added = true;\n                    }\n                }\n                textSize(30);\n                text('All time scores',265,200);\n                var comm = [];\n                for(var i = 0; i &lt; comments.length; i++ ){\n                    if(comments[i][3] === Map){\n                        comm.push(comments[i]);\n                    }\n                }\n                comm.push(['',0,0,0,p.time,'You'])\n                comm.sort(function (a, b) {\n                    return a[4] - b[4];\n                });\n                textSize(20);\n                var you = false;\n                for(var i = 0; i &lt; 3; i ++){\n                    var c = comm[i];\n                    if(c!== undefined){\n                    text((i+1)+') '+c[5]+' : '+(~~(c[4]/30)),265,230+i*25)\n                    if(c[5] === 'You'){\n                        you = true;\n                    }\n                    }\n                }\n                if(!you){\n                    var c;\n                    for(var i = 0; i &lt; comm.length; i ++){\n                        if(comm[i][5] === 'You'){\n                            c = comm[i];\n                            break;\n                        }\n                    }\n                    text((i+1)+') '+c[5]+' : '+(~~(c[4]/30)),265,300)\n                }\n                textFont(fonts[1],25)\n                text('$'+money+' ',490,60 )\n                \n                popMatrix();\n                \n                btns.home.run();\n                btns.play.run();\n                btns.save.run();\n            };\n            var how = function(){\n                noStroke();\n                fill(255,0,90);\n                quad(50+118,20,135+118,20,115+118,120,30+118,120)\n                rect(150,125,265,5);\n                triangle(50+118,20,30+118,20,50+118,40)\n                \n                fill(255,0)\n                image(imgs.menutrack,0,100);\n                fill(255,0)\n                image(imgs.grass,0,0,600,600)\n                pushMatrix();\n                translate(30,0,70);\n                fill(255);\n                textFont(fonts[0],140)\n                text('How',300,30);\n                textFont(fonts[1],25);\n                text('Use the up arrow to accelerate, and left and right arrows to steer. Try to complete 3 laps as fast as possible. If you get a good race, hit save, and copy and paste your savecode into the tips and thanks.',80,100,400,400)\n                textFont(fonts[1],25)\n                text('$'+money+' ',490,60 )\n                popMatrix();\n                \n                btns.home.run();\n            };\n            var shop = function(){\n                translate(40,0)\n                noStroke();\n                fill(255,0,90);\n                quad(105,20,190,20,170,120,85,120)\n                rect(80,125,330,5);\n                triangle(105,20,85,20,105,40)\n                translate(-40,0)\n                \n                fill(255,0)\n                image(imgs.menutrack,0,100);\n                fill(255,0)\n                image(imgs.grass,0,0,600,600)\n                pushMatrix();\n                translate(30,0,70);\n                \n                \n                fill(255);\n                \n                textFont(fonts[0],140)\n                text('Shop',300,30);\n                //translate(0,0,30);\n                textFont(fonts[1],25)\n                text('$'+money+' ',490,60 )\n     \n                stroke(255);\n                strokeWeight(3);\n                noFill();\n                if(mouseX &lt;50){\n                    fill(255)\n                }\n                triangle(20,300,50,350,50,250)\n                \n                noFill();\n                if(mouseX >550){\n                    fill(255)\n                }\n                triangle(515,300,515-30,350,515-30,250)\n                popMatrix();\n                if(mouseX > 550 && clicked){\n                    view ++; \n                    if(view >= cars.length){\n                        view = 0;\n                    }\n                }\n                if(mouseX &lt; 50 && clicked){\n                    view --;\n                    if(view &lt; 0){\n                        view = cars.length-1;\n                    }\n                }\n                pushMatrix();\n                viewX = lerp(viewX,-cars[view].x,0.1)\n                translate(viewX+90,0)\n                for(var i = 0; i &lt; cars.length; i ++){\n                    cars[i].draw();\n                }\n                \n                popMatrix();\n                btns.home.run();\n            };\n            \n            draw = function(){\n                try{\n                width = canvas3D.width;\n                height = canvas3D.height;\n                \n                switch(scene){\n                    case 'load':\n                        load();\n                    break;\n                    case 'play':\n                        play();\n                    break;\n                    case 'how':\n                        how();\n                    break;\n                    case 'menu':\n                        menu();\n                    break;\n                    case 'over':\n                        over();\n                    break;\n                    case 'shop':\n                        shop();\n                    break;\n                }\n                clicked = false;\n                trans.run();\n                }\n                catch(e){\n                    println(e);\n                }\n                countdown.run();\n            };\n            \n            mouseClicked = function(){\n                clicked = true; \n            };\n            \n            keyPressed = function() {\n                keys[keyCode] = true;\n            };\n            keyReleased = function() {\n                keys[keyCode] = false;\n            };\n        }\n    };\n    (function() {\n        canvas3D.width = window.innerWidth;\n        canvas3D.height = window.innerHeight;\n        var processingInstance = new Processing(canvas3D, code); \n    })();\n    &lt;/script>\n    \n    &lt;!-- Program Saver made by Bluebird -->\n    &lt;script>//1035246 big   1032738 good\n        var save = function(){\n            html2canvas(document.body,{\n                allowTaint : false,\n                useCORS: true,\n\n                width:600,\n                height:600,\n                y: 0\n                \n            })\n            .then(function(canvas){\n                b64Img = canvas.toDataURL();\n                window.top.postMessage(b64Img, \"https://www.khanacademy.org/\");\n            });\n        };\n        var handleSave = function(e) {\n            if (JSON.parse(e.data).screenshot) {\n                setTimeout(function() {\n                    save();\n                }, 1000)\n            }\n        };\n        window.savers = window.savers || 0;\n        window.addEventListener('message', handleSave);\n        window.savers += 1;\n        for (window.savers; window.savers > 1; window.savers -= 1) {\n            window.removeEventListener('message', handleSave)\n        }\n    &lt;/script>\n        \n    &lt;/body>\n&lt;/html>\n","voteCount":465,"forkCount":37};
}